<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nova YÃ¶netici Paneli</title>
<style>
    body { background: #111; color: white; font-family: sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; flex-direction: column; }
    .card { background: #222; padding: 30px; border-radius: 15px; width: 90%; max-width: 400px; text-align: center; border: 2px solid #00bfff; }
    h2 { color: #00bfff; margin-bottom: 20px; }
    input, textarea { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #444; background: #333; color: white; box-sizing: border-box; }
    button { width: 100%; padding: 15px; background: linear-gradient(90deg, #00bfff, #0077b3); color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; font-weight: bold; margin-top: 10px; }
    button:hover { opacity: 0.9; }
    #status { margin-top: 15px; font-size: 14px; }
</style>
</head>
<body>

<div class="card">
    <h2>ğŸ“¡ Nova Broadcast</h2>
    <input type="password" id="password" placeholder="YÃ¶netici Åifresi">
    <textarea id="message" rows="4" placeholder="TÃ¼m kullanÄ±cÄ±lara gidecek mesaj..."></textarea>
    <button onclick="sendNotification()">YAYINLA ğŸš€</button>
    <div id="status"></div>
</div>

<script>
async function sendNotification() {
    const password = document.getElementById('password').value;
    const message = document.getElementById('message').value;
    const statusDiv = document.getElementById('status');
    const btn = document.querySelector('button');

    if (!message || !password) {
        statusDiv.innerHTML = "<span style='color:red'>âš ï¸ Åifre ve mesaj gerekli!</span>";
        return;
    }

    btn.disabled = true;
    btn.innerText = "GÃ¶nderiliyor...";
    statusDiv.innerHTML = "â³ Ä°ÅŸleniyor...";

    try {
        const response = await fetch('https://nova-chat-d50f.onrender.com/api/admin/broadcast', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ password: password, message: message })
        });

        const data = await response.json();

        if (data.success) {
            statusDiv.innerHTML = `<span style='color:#0f0'>âœ… BaÅŸarÄ±lÄ±! ${data.sent_count} kiÅŸiye gÃ¶nderildi.</span>`;
            document.getElementById('message').value = ""; // MesajÄ± temizle
        } else {
            statusDiv.innerHTML = `<span style='color:red'>âŒ Hata: ${data.error}</span>`;
        }
    } catch (err) {
        statusDiv.innerHTML = `<span style='color:red'>âŒ BaÄŸlantÄ± hatasÄ±!</span>`;
    } finally {
        btn.disabled = false;
        btn.innerText = "YAYINLA ğŸš€";
    }
}
</script>

</body>
</html>